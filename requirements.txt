import streamlit as st
import google.generativeai as genai

st.title("üïµÔ∏è Diagnostic de votre Cl√© API")

# Configuration
try:
    genai.configure(api_key=st.secrets["GOOGLE_API_KEY"])
except:
    st.error("Pas de cl√© trouv√©e.")
    st.stop()

# Scan
if st.button("Lancer le scan des mod√®les"):
    try:
        st.write("Interrogation de Google en cours...")
        models = genai.list_models()
        
        found_any = False
        for m in models:
            if 'generateContent' in m.supported_generation_methods:
                st.success(f"‚úÖ MOD√àLE DISPONIBLE : **{m.name}**")
                found_any = True
        
        if not found_any:
            st.error("Aucun mod√®le de g√©n√©ration de texte trouv√© pour cette cl√©.")
            
    except Exception as e:
        st.error(f"Erreur de connexion : {e}")
